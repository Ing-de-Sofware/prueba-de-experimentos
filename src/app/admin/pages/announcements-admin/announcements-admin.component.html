<div class="announcement-wrapper">
  <div class="announcement-card-container">
    <h2>ðŸ“¢ Enviar Comunicado</h2>

    <form [formGroup]="announcementForm" (ngSubmit)="submit()">
      <mat-form-field appearance="fill">
        <mat-label>TÃ­tulo</mat-label>
        <input matInput formControlName="title" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>DescripciÃ³n</mat-label>
        <textarea matInput formControlName="description" rows="2"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Mensaje emergente (opcional)</mat-label>
        <textarea matInput formControlName="message" rows="2"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Audiencia</mat-label>
        <mat-select formControlName="audience">
          <mat-option value="all">Todos</mat-option>
          <mat-option value="doctors">MÃ©dicos</mat-option>
          <mat-option value="patients">Pacientes</mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-raised-button class="send-button" type="submit" [disabled]="announcementForm.invalid">
        Publicar Comunicado
      </button>
    </form>

    <div class="sent-announcements">
      <h3>ðŸ“„ Comunicados Enviados</h3>
      <mat-card *ngFor="let ann of announcements">
        <mat-card-title>{{ ann.title }}</mat-card-title>
        <mat-card-subtitle>
          Para: {{
            ann.audience === 'doctors'
              ? 'MÃ©dicos'
              : ann.audience === 'patients'
                ? 'Pacientes'
                : 'Todos'
          }}
          â€”
          {{ ann.createdAt | date:'short' }}
        </mat-card-subtitle>
        <mat-card-content>
          <p>{{ ann.description }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
